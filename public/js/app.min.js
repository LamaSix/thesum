"use strict";$.fn.resize_delayed=function(func,duration){this.resize(function(){clearTimeout(window.____resize_delayed),window.____resize_delayed=setTimeout(func,duration)})};var Parts={};Parts.Layout={_docElem:document.documentElement,_mobile:!1,isMobile:function(){return this._mobile},_userAgentInit:function(){this._docElem.setAttribute("data-useragent",navigator.userAgent)},is_homepage:!1,init:function(pageContext){var that=this;$(document).foundation(),this._userAgentInit(),this._mobile=$(window).width()<=1024,this._responsiveRefresh(),$(window).load(function(){that._equalizeWorkshopBlockHeights()}),"home"===pageContext&&(this._parrallaxChanger(),Parts.Animation.init()),Parts.Navigation.init(pageContext),$("#its-over").foundation("reveal","open"),$("#its-over").find(".close").on("click",function(e){e.preventDefault(),$("#its-over").foundation("reveal","close")})},_equalizeWorkshopBlockHeights:function(){var $workshopList=$("#workshop-list");if($workshopList.length>0){var goalHeight=0,$workshopBlocks=$workshopList.find(".workshop-block");$workshopBlocks.each(function(key,workshopBlock){goalHeight=$(workshopBlock).height()>goalHeight?$(workshopBlock).height():goalHeight}),$workshopBlocks.height(goalHeight)}},_responsiveRefresh:function(){var that=this;$(window).resize_delayed(function(){!that.isMobile()&&$(window).width()<=1024?location.reload():that.isMobile()&&$(window).width()>1024&&(Parts.Layout.init(that.is_homepage),Parts.Navigation.init(),Parts.Animation.init())},500)},_parrallaxChanger:function(){$(window).scroll(function(){var $parBg=$(".parrallax-bg");"down"===Parts.Util.scrollDirection&&$(window).scrollTop()>$("#about").offset().top&&$parBg.addClass("candy-chang"),"up"===Parts.Util.scrollDirection&&$(window).scrollTop()<=$("#speakers-summary").offset().top&&$parBg.removeClass("candy-chang")})}},Parts.Animation={_animateLogoParts:function(progress){var invertedProgress=100-progress,$logo=$(".summary").find(".logo"),$logoPart1=$logo.find(".top.left"),$logoPart2=$logo.find(".top.right"),$logoPart3=$logo.find(".bottom.left"),$logoPart4=$logo.find(".bottom.right"),screenSize=$(window).width();1400>screenSize?(this._straightMoveEl($logoPart1,16*-invertedProgress,6*invertedProgress,0),this._rotateEl($logoPart3,1.7*-invertedProgress,3.5*invertedProgress,.8*invertedProgress),this._rotateEl($logoPart2,8.9*invertedProgress,2*invertedProgress,2*-invertedProgress),this._straightMoveEl($logoPart4,6.8*-invertedProgress+180,-2.7*-invertedProgress,1.7*invertedProgress)):2e3>screenSize?(this._straightMoveEl($logoPart1,16*-invertedProgress,8*invertedProgress,0),this._rotateEl($logoPart3,2*-invertedProgress,3.5*invertedProgress,.8*invertedProgress),this._rotateEl($logoPart2,8.9*invertedProgress,2*invertedProgress,3.5*-invertedProgress),this._straightMoveEl($logoPart4,6.8*-invertedProgress+180,-3*-invertedProgress,2.2*invertedProgress)):(this._straightMoveEl($logoPart1,16*-invertedProgress,14*invertedProgress,0),this._rotateEl($logoPart3,2*-invertedProgress,3.5*invertedProgress,.8*invertedProgress),this._rotateEl($logoPart2,8.9*invertedProgress,2*invertedProgress,5.5*-invertedProgress),this._straightMoveEl($logoPart4,6.8*-invertedProgress+180,-5*-invertedProgress,4.6*invertedProgress)),$logo.show()},_straightMoveEl:function($el,degrees,distanceX,distanceY){$el.css("-ms-transform","translate("+distanceX+"px,"+distanceY+"px)").css("-webkit-transform","translate("+distanceX+"px,"+distanceY+"px)").css("transform","translate("+distanceX+"px,"+distanceY+"px)"),$el.find("img").css("-ms-transform","rotate("+degrees+"deg) translate3d( 0, 0, 0)").css("-webkit-transform","rotate("+degrees+"deg) translate3d( 0, 0, 0)").css("transform","rotate("+degrees+"deg) translate3d( 0, 0, 0)")},_rotateEl:function($el,degrees,distanceX,distanceY){$el.css("-ms-transform","rotate("+degrees+"deg) translate("+distanceX+"px,"+distanceY+"px) translate3d( 0, 0, 0)").css("-webkit-transform","rotate("+degrees+"deg) translate("+distanceX+"px,"+distanceY+"px) translate3d( 0, 0, 0)").css("transform","rotate("+degrees+"deg) translate("+distanceX+"px,"+distanceY+"px) translate3d( 0, 0, 0)")},_prepareLogoAnimation:function(){var $summaryEl=$("body#home").find(".summary");$summaryEl.height(4*$(window).height()),$summaryEl.find(".pin-wrapper").css("position","fixed").css("width","100%");var curWindowTop=$(window).scrollTop(),finishLine=$summaryEl.height()-$(window).height()-100,progress=curWindowTop/finishLine||0;this._animateLogoParts(progress>100?100:progress);var that=this;$(window).scroll(function(){curWindowTop=$(window).scrollTop(),progress=curWindowTop/finishLine*100||0,that._animateLogoParts(progress>100?100:progress)}),$(window).load(function(){curWindowTop=$(window).scrollTop(),progress=curWindowTop/finishLine*100||0,that._animateLogoParts(progress>100?100:progress)})},_prepareCanBagetteAnimation:function(){var previousScrollTop=0;$(window).scroll(function(){var currentScrollTop=$(window).scrollTop(),scrollDiff=(currentScrollTop-previousScrollTop)/6;$(".can-bagette").css("bottom","+="+scrollDiff+"px"),previousScrollTop=currentScrollTop})},init:function(){Parts.Layout.isMobile()||(this._prepareLogoAnimation(),this._prepareCanBagetteAnimation())}},Parts.Navigation={$_navElem:{},init:function(pageContext){var that=this;this.$_navElem=$("#site-nav"),this._expandHandler(),this._navStickyer(),Parts.Layout.isMobile()||"home"!==pageContext||$(window).scroll(function(){that._headerDesktopLogo(),that._hideSummary()})},_expandHandler:function(){var that=this;that.$_navElem.find("a.navicon").on("click",function(e){e.preventDefault(),that.$_navElem.find("> ul").toggle(),$(this).hasClass("close")?$(this).removeClass("close"):$(this).addClass("close")})},_navStickyer:function(){var that=this,$homepageSiteNav=$("#site-nav.homepage");$homepageSiteNav.length>0&&($(window).resize(function(){that._stickyStuff($homepageSiteNav)}),$(window).scroll(function(){that._stickyStuff($homepageSiteNav)}))},_stickyStuff:function($siteNav){var scrollBottom=$(window).scrollTop()+$(window).height()-$siteNav.height(),scrollTop=$(window).scrollTop(),absNavPos=$(".summary").height()-$siteNav.height();scrollBottom>absNavPos&&($siteNav.addClass("abs-sticky"),$siteNav.css("top",absNavPos)),absNavPos>scrollBottom&&($siteNav.removeClass("abs-sticky"),$siteNav.removeClass("top-sticky"),$siteNav.css("top","")),scrollTop>=absNavPos&&($siteNav.removeClass("abs-sticky"),$siteNav.addClass("top-sticky"),$siteNav.css("top","")),Parts.Layout.isMobile()&&($siteNav.removeClass("abs-sticky"),$siteNav.removeClass("top-sticky"),$siteNav.css("top",""))},_navCTAButton:function(){var $siteNav=$("#site-nav"),$navCTAButton=$siteNav.find("a.cta"),$summaryCTAButton=$(".summary").find("a.cta"),navTop=$siteNav.offset().top,summaryCTATop=$summaryCTAButton.offset().top;summaryCTATop>navTop&&!$navCTAButton.is(":visible")&&($navCTAButton.fadeIn(),$summaryCTAButton.css("visibility","hidden")),navTop>summaryCTATop&&$navCTAButton.is(":visible")&&($navCTAButton.fadeOut(),$summaryCTAButton.css("visibility","visible"))},_hideSummary:function(){var $siteNav=$("#site-nav"),navTop=$siteNav.offset().top,viewportTop=$(window).scrollTop();viewportTop>=navTop&&$(".summary").css("visibility","hidden"),navTop>viewportTop&&$(".summary").css("visibility","visible")},_headerDesktopLogo:function(){var $siteNav=$("#site-nav"),$headerLogo=$siteNav.parent().find(".logo"),navTop=$siteNav.offset().top,summaryLogoBottom=$(".summary").find(".logo").offset().top;summaryLogoBottom>=navTop&&!$headerLogo.is(":visible")&&$headerLogo.fadeIn("slow"),navTop>summaryLogoBottom&&$headerLogo.is(":visible")&&$headerLogo.hide()}},Parts.EmailSignup={init:function(){var that=this;$("#mc-embedded-subscribe-form").on("submit",function(e){e.preventDefault(),$(this).ajaxSubmit({type:"GET",url:that.getAjaxSubmitUrl(),dataType:"json",contentType:"application/json; charset=utf-8",success:Parts.EmailSignup.success,failure:Parts.EmailSignup.fail})}),$("#email-signup").find(".close").on("click",function(e){e.preventDefault(),$("#email-signup").foundation("reveal","close")})},success:function(response){"success"===response.result?($("#error-response").hide(),$("#success-response").show().html(response.msg),setTimeout(function(){$("#email-signup").foundation("reveal","close")},4e3)):Parts.EmailSignup.fail(response)},fail:function(response){var message="Something went wrong. Please try it one more time. :)";response&&response.msg&&(message=response.msg.replace("0 - ","")),$("#error-response").show().html(message),$("#success-response").hide()},getAjaxSubmitUrl:function(){var url=$("form#mc-embedded-subscribe-form").attr("action");return url=url.replace("/post?u=","/post-json?u="),url+="&c=?"}},Parts.Util={_oldScrollPos:0,scrollDirection:"down",init:function(){var that=this;this._oldScrollPos=$(window).scrollTop(),$(window).scroll(function(){that._updateScrollDirection()})},_updateScrollDirection:function(){this.scrollDirection=this._oldScrollPos>$(window).scrollTop()?"up":"down",this._oldScrollPos=$(window).scrollTop()}},Parts.Speakers={_speakersEl:[],init:function(){this._$speakersEl=$("#speakers .speaker"),this._$speakersEl.length>0&&this.setupBioButtons()},setupBioButtons:function(){this.insertBioButtons(),this._$speakersEl.each(function(index,el){var $speakerEl=$(el),$readBioButton=$speakerEl.find(".read-full-bio"),$hideBioButton=$speakerEl.find(".hide-full-bio"),$extendedInfoEl=$speakerEl.find(".extended-info");$readBioButton.on("click",function(e){e.preventDefault(),$extendedInfoEl.stop().slideDown("slow",function(){$(this).fadeTo("fast","1")});var hashLoc="#"+$speakerEl.attr("id"),headerOffset=$("body>header").height()||$("#site-nav").height();$("body,html").animate({scrollTop:$(hashLoc).offset().top-headerOffset},500),$(this).hide(),$hideBioButton.show()}),$hideBioButton.on("click",function(e){e.preventDefault(),$extendedInfoEl.stop().fadeTo("fast","0",function(){$extendedInfoEl.slideUp("slow")}),$(this).hide(),$readBioButton.show()})})},insertBioButtons:function(){this._$speakersEl.find(".accolades").append('<a class="read-full-bio" href="javascript;">Read full bio</a><a class="hide-full-bio" href="javascript;">Hide bio</a>')}},$(function(){var pageContext=$("body").attr("id");Parts.Layout.init(pageContext),Parts.EmailSignup.init(),Parts.Util.init(),Parts.Speakers.init()});