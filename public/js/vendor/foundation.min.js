!function($,window,document,undefined){"use strict";function removeQuotes(string){return("string"==typeof string||string instanceof String)&&(string=string.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),string}var header_helpers=function(class_array){for(var i=class_array.length,head=$("head");i--;)0===head.has("."+class_array[i]).length&&head.append('<meta class="'+class_array[i]+'" />')};header_helpers(["foundation-mq-small","foundation-mq-medium","foundation-mq-large","foundation-mq-xlarge","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),$(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof document.body&&FastClick.attach(document.body)});var S=function(selector,context){if("string"==typeof selector){if(context){var cont;if(context.jquery){if(cont=context[0],!cont)return context}else cont=context;return $(cont.querySelectorAll(selector))}return $(document.querySelectorAll(selector))}return $(selector,context)},attr_name=function(init){var arr=[];return init||arr.push("data"),this.namespace.length>0&&arr.push(this.namespace),arr.push(this.name),arr.join("-")},add_namespace=function(str){for(var parts=str.split("-"),i=parts.length,arr=[];i--;)0!==i?arr.push(parts[i]):this.namespace.length>0?arr.push(this.namespace,parts[i]):arr.push(parts[i]);return arr.reverse().join("-")},bindings=function(method,options){var self=this,should_bind_events=!S(this).data(this.attr_name(!0));return S(this.scope).is("["+this.attr_name()+"]")?(S(this.scope).data(this.attr_name(!0)+"-init",$.extend({},this.settings,options||method,this.data_options(S(this.scope)))),should_bind_events&&this.events(this.scope)):S("["+this.attr_name()+"]",this.scope).each(function(){var should_bind_events=!S(this).data(self.attr_name(!0)+"-init");S(this).data(self.attr_name(!0)+"-init",$.extend({},self.settings,options||method,self.data_options(S(this)))),should_bind_events&&self.events(this)}),"string"==typeof method?this[method].call(this,options):void 0},single_image_loaded=function(image,callback){function loaded(){callback(image[0])}function bindLoad(){if(this.one("load",loaded),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var src=this.attr("src"),param=src.match(/\?/)?"&":"?";param+="random="+(new Date).getTime(),this.attr("src",src+param)}}return image.attr("src")?void(image[0].complete||4===image[0].readyState?loaded():bindLoad.call(image)):void loaded()};window.matchMedia=window.matchMedia||function(doc){var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");return div.id="mq-test-1",div.style.cssText="position:absolute;top:-100em",fakeBody.style.background="none",fakeBody.appendChild(div),function(q){return div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width: 42px; }</style>',docElem.insertBefore(fakeBody,refNode),bool=42===div.offsetWidth,docElem.removeChild(fakeBody),{matches:bool,media:q}}}(document),function(){function raf(){animating&&(requestAnimationFrame(raf),jqueryFxAvailable&&jQuery.fx.tick())}for(var animating,lastTime=0,vendors=["webkit","moz"],requestAnimationFrame=window.requestAnimationFrame,cancelAnimationFrame=window.cancelAnimationFrame,jqueryFxAvailable="undefined"!=typeof jQuery.fx;lastTime<vendors.length&&!requestAnimationFrame;lastTime++)requestAnimationFrame=window[vendors[lastTime]+"RequestAnimationFrame"],cancelAnimationFrame=cancelAnimationFrame||window[vendors[lastTime]+"CancelAnimationFrame"]||window[vendors[lastTime]+"CancelRequestAnimationFrame"];requestAnimationFrame?(window.requestAnimationFrame=requestAnimationFrame,window.cancelAnimationFrame=cancelAnimationFrame,jqueryFxAvailable&&(jQuery.fx.timer=function(timer){timer()&&jQuery.timers.push(timer)&&!animating&&(animating=!0,raf())},jQuery.fx.stop=function(){animating=!1})):(window.requestAnimationFrame=function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id},window.cancelAnimationFrame=function(id){clearTimeout(id)})}(jQuery),window.Foundation={name:"Foundation",version:"5.3.1",media_queries:{small:S(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:S(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:S(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:S(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:S(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:$("<style></style>").appendTo("head")[0].sheet,global:{namespace:undefined},init:function(scope,libraries,method,options,response){var args=[scope,method,options,response],responses=[];if(this.rtl=/rtl/i.test(S("html").attr("dir")),this.scope=scope||this.scope,this.set_namespace(),libraries&&"string"==typeof libraries&&!/reflow/i.test(libraries))this.libs.hasOwnProperty(libraries)&&responses.push(this.init_lib(libraries,args));else for(var lib in this.libs)responses.push(this.init_lib(lib,libraries));return scope},init_lib:function(lib,args){return this.libs.hasOwnProperty(lib)?(this.patch(this.libs[lib]),args&&args.hasOwnProperty(lib)?("undefined"!=typeof this.libs[lib].settings?$.extend(!0,this.libs[lib].settings,args[lib]):"undefined"!=typeof this.libs[lib].defaults&&$.extend(!0,this.libs[lib].defaults,args[lib]),this.libs[lib].init.apply(this.libs[lib],[this.scope,args[lib]])):(args=args instanceof Array?args:new Array(args),this.libs[lib].init.apply(this.libs[lib],args))):function(){}},patch:function(lib){lib.scope=this.scope,lib.namespace=this.global.namespace,lib.rtl=this.rtl,lib.data_options=this.utils.data_options,lib.attr_name=attr_name,lib.add_namespace=add_namespace,lib.bindings=bindings,lib.S=this.utils.S},inherit:function(scope,methods){for(var methods_arr=methods.split(" "),i=methods_arr.length;i--;)this.utils.hasOwnProperty(methods_arr[i])&&(scope[methods_arr[i]]=this.utils[methods_arr[i]])},set_namespace:function(){var namespace=this.global.namespace===undefined?$(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=namespace===undefined||/false/i.test(namespace)?"":namespace},libs:{},utils:{S:S,throttle:function(func,delay){var timer=null;return function(){var context=this,args=arguments;null==timer&&(timer=setTimeout(function(){func.apply(context,args),timer=null},delay))}},debounce:function(func,delay,immediate){var timeout,result;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout;return clearTimeout(timeout),timeout=setTimeout(later,delay),callNow&&(result=func.apply(context,args)),result}},data_options:function(el,data_attr_name){function isNumber(o){return!isNaN(o-0)&&null!==o&&""!==o&&o!==!1&&o!==!0}function trim(str){return"string"==typeof str?$.trim(str):str}data_attr_name=data_attr_name||"options";var ii,p,opts_arr,opts={},data_options=function(el){var namespace=Foundation.global.namespace;return el.data(namespace.length>0?namespace+"-"+data_attr_name:data_attr_name)},cached_options=data_options(el);if("object"==typeof cached_options)return cached_options;for(opts_arr=(cached_options||":").split(";"),ii=opts_arr.length;ii--;)p=opts_arr[ii].split(":"),p=[p[0],p.slice(1).join(":")],/true/i.test(p[1])&&(p[1]=!0),/false/i.test(p[1])&&(p[1]=!1),isNumber(p[1])&&(p[1]=-1===p[1].indexOf(".")?parseInt(p[1],10):parseFloat(p[1])),2===p.length&&p[0].length>0&&(opts[trim(p[0])]=trim(p[1]));return opts},register_media:function(media,media_class){Foundation.media_queries[media]===undefined&&($("head").append('<meta class="'+media_class+'"/>'),Foundation.media_queries[media]=removeQuotes($("."+media_class).css("font-family")))},add_custom_rule:function(rule,media){if(media===undefined&&Foundation.stylesheet)Foundation.stylesheet.insertRule(rule,Foundation.stylesheet.cssRules.length);else{var query=Foundation.media_queries[media];query!==undefined&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[media]+"{ "+rule+" }")}},image_loaded:function(images,callback){var self=this,unloaded=images.length;0===unloaded&&callback(images),images.each(function(){single_image_loaded(self.S(this),function(){unloaded-=1,0===unloaded&&callback(images)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)}}},$.fn.foundation=function(){var args=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(args)),this})}}(jQuery,window,window.document),function($){"use strict";Foundation.libs.alert={name:"alert",version:"5.3.3",settings:{callback:function(){}},init:function(scope,method,options){this.bindings(method,options)},events:function(){var self=this,S=this.S;$(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] a.close",function(e){var alertBox=S(this).closest("["+self.attr_name()+"]"),settings=alertBox.data(self.attr_name(!0)+"-init")||self.settings;e.preventDefault(),Modernizr.csstransitions?(alertBox.addClass("alert-close"),alertBox.on("transitionend webkitTransitionEnd oTransitionEnd",function(){S(this).trigger("close").trigger("close.fndtn.alert").remove(),settings.callback()})):alertBox.fadeOut(300,function(){S(this).trigger("close").trigger("close.fndtn.alert").remove(),settings.callback()})})},reflow:function(){}}}(jQuery,window,window.document),function($,window,document,undefined){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.3.3",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close, div.clearing-blackout",open_selectors:"",skip_selector:"",touch_label:"",init:!1,locked:!1},init:function(scope,method,options){var self=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(method,options),self.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(self.S("li",this.scope)):self.S("["+this.attr_name()+"]",this.scope).each(function(){self.assemble(self.S("li",this))})},events:function(scope){var self=this,S=self.S,$scroll_container=$(".scroll-container");$scroll_container.length>0&&(this.scope=$scroll_container),S(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li "+this.settings.open_selectors,function(e,current,target){var current=current||S(this),target=target||current,next=current.next("li"),settings=current.closest("["+self.attr_name()+"]").data(self.attr_name(!0)+"-init"),image=S(e.target);e.preventDefault(),settings||(self.init(),settings=current.closest("["+self.attr_name()+"]").data(self.attr_name(!0)+"-init")),target.hasClass("visible")&&current[0]===target[0]&&next.length>0&&self.is_open(current)&&(target=next,image=S("img",target)),self.open(image,current,target),self.update_paddles(target)}).on("click.fndtn.clearing",".clearing-main-next",function(e){self.nav(e,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(e){self.nav(e,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(e){Foundation.libs.clearing.close(e,this)}),$(document).on("keydown.fndtn.clearing",function(e){self.keydown(e)}),S(window).off(".clearing").on("resize.fndtn.clearing",function(){self.resize()}),this.swipe_events(scope)},swipe_events:function(){var self=this,S=self.S;S(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(e){e.touches||(e=e.originalEvent);var data={start_page_x:e.touches[0].pageX,start_page_y:e.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:undefined};S(this).data("swipe-transition",data),e.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(e){if(e.touches||(e=e.originalEvent),!(e.touches.length>1||e.scale&&1!==e.scale)){var data=S(this).data("swipe-transition");if("undefined"==typeof data&&(data={}),data.delta_x=e.touches[0].pageX-data.start_page_x,Foundation.rtl&&(data.delta_x=-data.delta_x),"undefined"==typeof data.is_scrolling&&(data.is_scrolling=!!(data.is_scrolling||Math.abs(data.delta_x)<Math.abs(e.touches[0].pageY-data.start_page_y))),!data.is_scrolling&&!data.active){e.preventDefault();var direction=data.delta_x<0?"next":"prev";data.active=!0,self.nav(e,direction)}}}).on("touchend.fndtn.clearing",".visible-img",function(e){S(this).data("swipe-transition",{}),e.stopPropagation()})},assemble:function($li){var $el=$li.parent();if(!$el.parent().hasClass("carousel")){$el.after('<div id="foundationClearingHolder"></div>');var grid=$el.detach(),grid_outerHTML="";if(null!=grid[0]){grid_outerHTML=grid[0].outerHTML;var holder=this.S("#foundationClearingHolder"),settings=$el.data(this.attr_name(!0)+"-init"),data={grid:'<div class="carousel">'+grid_outerHTML+"</div>",viewing:settings.templates.viewing},wrapper='<div class="clearing-assembled"><div>'+data.viewing+data.grid+"</div></div>",touch_label=this.settings.touch_label;Modernizr.touch&&(wrapper=$(wrapper).find(".clearing-touch-label").html(touch_label).end()),holder.after(wrapper).remove()}}},open:function($image,current,target){function startLoad(){setTimeout(function(){this.image_loaded(image,function(){1!==image.outerWidth()||error?cb.call(this,image):startLoad.call(this)}.bind(this))}.bind(this),100)}function cb(image){var $image=$(image);$image.css("visibility","visible"),body.css("overflow","hidden"),root.addClass("clearing-blackout"),container.addClass("clearing-container"),visible_image.show(),this.fix_height(target).caption(self.S(".clearing-caption",visible_image),self.S("img",target)).center_and_label(image,label).shift(current,target,function(){target.closest("li").siblings().removeClass("visible"),target.closest("li").addClass("visible")}),visible_image.trigger("opened.fndtn.clearing")}var self=this,body=$(document.body),root=target.closest(".clearing-assembled"),container=self.S("div",root).first(),visible_image=self.S(".visible-img",container),image=self.S("img",visible_image).not($image),label=self.S(".clearing-touch-label",container),error=!1;$("body").on("touchmove",function(e){e.preventDefault()}),image.error(function(){error=!0}),this.locked()||(visible_image.trigger("open.fndtn.clearing"),image.attr("src",this.load($image)).css("visibility","hidden"),startLoad.call(this))},close:function(e,el){e.preventDefault();var container,visible_image,root=function(target){return/blackout/.test(target.selector)?target:target.closest(".clearing-blackout")}($(el)),body=$(document.body);return el===e.target&&root&&(body.css("overflow",""),container=$("div",root).first(),visible_image=$(".visible-img",container),visible_image.trigger("close.fndtn.clearing"),this.settings.prev_index=0,$("ul["+this.attr_name()+"]",root).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),container.removeClass("clearing-container"),visible_image.hide(),visible_image.trigger("closed.fndtn.clearing")),$("body").off("touchmove"),!1},is_open:function(current){return current.parent().prop("style").length>0},keydown:function(e){var clearing=$(".clearing-blackout ul["+this.attr_name()+"]"),NEXT_KEY=this.rtl?37:39,PREV_KEY=this.rtl?39:37,ESC_KEY=27;e.which===NEXT_KEY&&this.go(clearing,"next"),e.which===PREV_KEY&&this.go(clearing,"prev"),e.which===ESC_KEY&&this.S("a.clearing-close").trigger("click").trigger("click.fndtn.clearing")},nav:function(e,direction){var clearing=$("ul["+this.attr_name()+"]",".clearing-blackout");e.preventDefault(),this.go(clearing,direction)},resize:function(){var image=$("img",".clearing-blackout .visible-img"),label=$(".clearing-touch-label",".clearing-blackout");image.length&&(this.center_and_label(image,label),image.trigger("resized.fndtn.clearing"))},fix_height:function(target){var lis=target.parent().children(),self=this;return lis.each(function(){var li=self.S(this),image=li.find("img");li.height()>image.outerHeight()&&li.addClass("fix-height")}).closest("ul").width(100*lis.length+"%"),this},update_paddles:function(target){target=target.closest("li");var visible_image=target.closest(".carousel").siblings(".visible-img");target.next().length>0?this.S(".clearing-main-next",visible_image).removeClass("disabled"):this.S(".clearing-main-next",visible_image).addClass("disabled"),target.prev().length>0?this.S(".clearing-main-prev",visible_image).removeClass("disabled"):this.S(".clearing-main-prev",visible_image).addClass("disabled")},center_and_label:function(target,label){return this.rtl?(target.css({marginRight:-(target.outerWidth()/2),marginTop:-(target.outerHeight()/2),left:"auto",right:"50%"}),label.length>0&&label.css({marginRight:-(label.outerWidth()/2),marginTop:-(target.outerHeight()/2)-label.outerHeight()-10,left:"auto",right:"50%"})):(target.css({marginLeft:-(target.outerWidth()/2),marginTop:-(target.outerHeight()/2)}),label.length>0&&label.css({marginLeft:-(label.outerWidth()/2),marginTop:-(target.outerHeight()/2)-label.outerHeight()-10})),this},load:function($image){var href;return href="A"===$image[0].nodeName?$image.attr("href"):$image.parent().attr("href"),this.preload($image),href?href:$image.attr("src")},preload:function($image){this.img($image.closest("li").next()).img($image.closest("li").prev())},img:function(img){if(img.length){var new_img=new Image,new_a=this.S("a",img);new_img.src=new_a.length?new_a.attr("href"):this.S("img",img).attr("src")}return this},caption:function(container,$image){var caption=$image.attr("data-caption");return caption?container.html(caption).show():container.text("").hide(),this},go:function($ul,direction){var current=this.S(".visible",$ul),target=current[direction]();this.settings.skip_selector&&0!=target.find(this.settings.skip_selector).length&&(target=target[direction]()),target.length&&this.S("img",target).trigger("click",[current,target]).trigger("click.fndtn.clearing",[current,target]).trigger("change.fndtn.clearing")},shift:function(current,target,callback){var skip_shift,clearing=target.parent(),old_index=this.settings.prev_index||target.index(),direction=this.direction(clearing,current,target),dir=this.rtl?"right":"left",left=parseInt(clearing.css("left"),10),width=target.outerWidth(),dir_obj={};target.index()===old_index||/skip/.test(direction)?/skip/.test(direction)&&(skip_shift=target.index()-this.settings.up_count,this.lock(),skip_shift>0?(dir_obj[dir]=-(skip_shift*width),clearing.animate(dir_obj,300,this.unlock())):(dir_obj[dir]=0,clearing.animate(dir_obj,300,this.unlock()))):/left/.test(direction)?(this.lock(),dir_obj[dir]=left+width,clearing.animate(dir_obj,300,this.unlock())):/right/.test(direction)&&(this.lock(),dir_obj[dir]=left-width,clearing.animate(dir_obj,300,this.unlock())),callback()},direction:function($el,current,target){var response,lis=this.S("li",$el),li_width=lis.outerWidth()+lis.outerWidth()/4,up_count=Math.floor(this.S(".clearing-container").outerWidth()/li_width)-1,target_index=lis.index(target);return this.settings.up_count=up_count,response=this.adjacent(this.settings.prev_index,target_index)?target_index>up_count&&target_index>this.settings.prev_index?"right":target_index>up_count-1&&target_index<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=target_index,response},adjacent:function(current_index,target_index){for(var i=target_index+1;i>=target_index-1;i--)if(i===current_index)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(window).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document),function($,window,document,undefined){"use strict";function getAnimationData(str){var fade=/fade/i.test(str),pop=/pop/i.test(str);return{animate:fade||pop,pop:pop,fade:fade}}Foundation.libs.reveal={name:"reveal",version:"5.3.3",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(scope,method,options){$.extend(!0,this.settings,method,options),this.bindings(method,options)},events:function(){var self=this,S=self.S;return S(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(e){if(e.preventDefault(),!self.locked){var element=S(this),ajax=element.data(self.data_attr("reveal-ajax"));if(self.locked=!0,"undefined"==typeof ajax)self.open.call(self,element);else{var url=ajax===!0?element.attr("href"):ajax;self.open.call(self,element,{url:url})}}}),S(document).on("click.fndtn.reveal",this.close_targets(),function(e){if(e.preventDefault(),!self.locked){var settings=S("["+self.attr_name()+"].open").data(self.attr_name(!0)+"-init"),bg_clicked=S(e.target)[0]===S("."+settings.bg_class)[0];if(bg_clicked){if(!settings.close_on_background_click)return;e.stopPropagation()}self.locked=!0,self.close.call(self,bg_clicked?S("["+self.attr_name()+"].open"):S(this).closest("["+self.attr_name()+"]"))}}),S("["+self.attr_name()+"]",this.scope).length>0?S(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):S(this.scope).on("open.fndtn.reveal","["+self.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+self.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+self.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+self.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+self.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+self.attr_name()+"]",this.close_video),!0},key_up_on:function(){var self=this;return self.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(event){var open_modal=self.S("["+self.attr_name()+"].open"),settings=open_modal.data(self.attr_name(!0)+"-init")||self.settings;settings&&27===event.which&&settings.close_on_esc&&!self.locked&&self.close.call(self,open_modal)}),!0},key_up_off:function(){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(target,ajax_settings){var modal,self=this;target?"undefined"!=typeof target.selector?modal=self.S("#"+target.data(self.data_attr("reveal-id"))).first():(modal=self.S(this.scope),ajax_settings=target):modal=self.S(this.scope);var settings=modal.data(self.attr_name(!0)+"-init");if(settings=settings||this.settings,modal.hasClass("open")&&target.attr("data-reveal-id")==modal.attr("id"))return self.close(modal);if(!modal.hasClass("open")){var open_modal=self.S("["+self.attr_name()+"].open");if("undefined"==typeof modal.data("css-top")&&modal.data("css-top",parseInt(modal.css("top"),10)).data("offset",this.cache_offset(modal)),this.key_up_on(modal),modal.trigger("open").trigger("open.fndtn.reveal"),open_modal.length<1&&this.toggle_bg(modal,!0),"string"==typeof ajax_settings&&(ajax_settings={url:ajax_settings}),"undefined"!=typeof ajax_settings&&ajax_settings.url){var old_success="undefined"!=typeof ajax_settings.success?ajax_settings.success:null;$.extend(ajax_settings,{success:function(data,textStatus,jqXHR){$.isFunction(old_success)&&old_success(data,textStatus,jqXHR),modal.html(data),self.S(modal).foundation("section","reflow"),self.S(modal).children().foundation(),open_modal.length>0&&self.hide(open_modal,settings.css.close),self.show(modal,settings.css.open)}}),$.ajax(ajax_settings)}else open_modal.length>0&&this.hide(open_modal,settings.css.close),this.show(modal,settings.css.open)}},close:function(modal){var modal=modal&&modal.length?modal:this.S(this.scope),open_modals=this.S("["+this.attr_name()+"].open"),settings=modal.data(this.attr_name(!0)+"-init")||this.settings;open_modals.length>0&&(this.locked=!0,this.key_up_off(modal),modal.trigger("close").trigger("close.fndtn.reveal"),this.toggle_bg(modal,!1),this.hide(open_modals,settings.css.close,settings))},close_targets:function(){var base="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?base+", ."+this.settings.bg_class:base},toggle_bg:function(modal,state){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=$("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var visible=this.settings.bg.filter(":visible").length>0;state!=visible&&((state==undefined?visible:!state)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(el,css){if(css){var settings=el.data(this.attr_name(!0)+"-init")||this.settings,root_element=settings.root_element;if(0===el.parent(root_element).length){var placeholder=el.wrap('<div style="display: none;" />').parent();el.on("closed.fndtn.reveal.wrapped",function(){el.detach().appendTo(placeholder),el.unwrap().unbind("closed.fndtn.reveal.wrapped")}),el.detach().appendTo(root_element)}var animData=getAnimationData(settings.animation);if(animData.animate||(this.locked=!1),animData.pop){css.top=$(window).scrollTop()-el.data("offset")+"px";var end_css={top:$(window).scrollTop()+el.data("css-top")+"px",opacity:1};return setTimeout(function(){return el.css(css).animate(end_css,settings.animation_speed,"linear",function(){this.locked=!1,el.trigger("opened").trigger("opened.fndtn.reveal")}.bind(this)).addClass("open")}.bind(this),settings.animation_speed/2)}if(animData.fade){css.top=$(window).scrollTop()+el.data("css-top")+"px";var end_css={opacity:1};return setTimeout(function(){return el.css(css).animate(end_css,settings.animation_speed,"linear",function(){this.locked=!1,el.trigger("opened").trigger("opened.fndtn.reveal")}.bind(this)).addClass("open")}.bind(this),settings.animation_speed/2)}return el.css(css).show().css({opacity:1}).addClass("open").trigger("opened").trigger("opened.fndtn.reveal")}var settings=this.settings;return getAnimationData(settings.animation).fade?el.fadeIn(settings.animation_speed/2):(this.locked=!1,el.show())},hide:function(el,css){if(css){var settings=el.data(this.attr_name(!0)+"-init");settings=settings||this.settings;var animData=getAnimationData(settings.animation);if(animData.animate||(this.locked=!1),animData.pop){var end_css={top:-$(window).scrollTop()-el.data("offset")+"px",opacity:0};return setTimeout(function(){return el.animate(end_css,settings.animation_speed,"linear",function(){this.locked=!1,el.css(css).trigger("closed").trigger("closed.fndtn.reveal")}.bind(this)).removeClass("open")}.bind(this),settings.animation_speed/2)}if(animData.fade){var end_css={opacity:0};return setTimeout(function(){return el.animate(end_css,settings.animation_speed,"linear",function(){this.locked=!1,el.css(css).trigger("closed").trigger("closed.fndtn.reveal")}.bind(this)).removeClass("open")}.bind(this),settings.animation_speed/2)}return el.hide().css(css).removeClass("open").trigger("closed").trigger("closed.fndtn.reveal")}var settings=this.settings;return getAnimationData(settings.animation).fade?el.fadeOut(settings.animation_speed/2):el.hide()},close_video:function(e){var video=$(".flex-video",e.target),iframe=$("iframe",video);iframe.length>0&&(iframe.attr("data-src",iframe[0].src),iframe.attr("src",iframe.attr("src")),video.hide())},open_video:function(e){var video=$(".flex-video",e.target),iframe=video.find("iframe");if(iframe.length>0){var data_src=iframe.attr("data-src");if("string"==typeof data_src)iframe[0].src=iframe.attr("data-src");else{var src=iframe[0].src;iframe[0].src=undefined,iframe[0].src=src}video.show()}},data_attr:function(str){return this.namespace.length>0?this.namespace+"-"+str:str},cache_offset:function(modal){var offset=modal.show().height()+parseInt(modal.css("top"),10);return modal.hide(),offset},off:function(){$(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document);